{"version":3,"sources":["components/BlogForm.js","components/Blogs.js","components/Login.js","services/blogService.js","App.js","index.js"],"names":["BlogForm","handlePost","blog","handleBlogTitle","handleBlogAuthor","handleBlogUrl","onSubmit","type","value","title","onChange","author","url","Blogs","blogs","href","LoginForm","handleLogin","handleUsername","handlePassword","username","password","token","getToken","newToken","getAll","a","fetch","headers","req","json","createBlog","method","body","JSON","stringify","ok","Error","loginService","credentials","App","useState","setBlogs","errorMessage","setError","addMessage","setAddMessage","setUsername","setPassword","user","setUser","setBlog","useEffect","blogsFetched","loggedUser","parse","window","localStorage","getItem","e","preventDefault","userLogin","setItem","setTimeout","console","log","style","color","Login","target","name","onClick","clear","map","x","id","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.523685f1.chunk.js","sourcesContent":["const BlogForm = ({handlePost, blog, handleBlogTitle, handleBlogAuthor, handleBlogUrl}) => {\n    return (\n    <form onSubmit={handlePost} >\n        <div>title: <input type=\"text\" value={blog.title} onChange={handleBlogTitle} /></div>\n        <div>author: <input type=\"text\" value={blog.author} onChange={handleBlogAuthor} /></div>\n        <div>url: <input type=\"text\" value={blog.url} onChange={handleBlogUrl} /></div>\n        <button type=\"submit\">post</button>\n    </form>\n    )\n}\n\nexport default BlogForm","const Blogs = ({ blogs }) => <div><p><a href={blogs.url}>{blogs.title}</a> {blogs.author}</p></div>\n\nexport default Blogs","const LoginForm = ({ handleLogin, handleUsername, handlePassword, username, password}) => {\n    return (\n        <>\n        <h1>Login</h1>\n        <form onSubmit={handleLogin}>\n            <div>\n            username <input type=\"username\" value={username} onChange={handleUsername} />\n            </div>\n            <div>\n            password <input type=\"password\" value={password} onChange={handlePassword} />\n            </div>\n            <button type=\"submit\">Login</button>\n        </form>\n        </>\n    )\n}\n\nexport default LoginForm","// blogService.js -- uses fetch API to fetch data from backend \n\n//define api endpoints\nconst blogs = `/api/blogs`\nconst login = `/api/login`\nlet token = null\n\nconst getToken = newToken => {\n    token = `bearer ${newToken}`\n}\n\nconst getAll = async () => {\n    const req = await fetch(blogs,{ headers: {'authorization':token}})\n    return req.json()\n}\n\nconst createBlog = async blog => {\n    const req = await fetch(blogs, {\n        method: 'POST', \n        headers: {'Content-Type':'application/json', 'authorization': token},\n        body: JSON.stringify(blog)\n    })\n\n    if(!req.ok){\n        throw Error\n    }\n\n    return req.json()\n}\n\nconst loginService = async credentials => {\n    const req = await fetch(login, {\n        method:\"POST\", \n        headers: {'Content-Type':'application/json','authorization':token},\n        body: JSON.stringify(credentials)\n    })\n\n    if(!req.ok){\n        throw Error\n    }\n\n    return req.json()\n}\n\n\nexport {\n    getAll,\n    createBlog,\n    loginService,\n    getToken\n}","import React, { useEffect, useState } from 'react'\nimport BlogForm from './components/BlogForm'\nimport Blogs from './components/Blogs'\nimport LoginForm from './components/Login'\n//const blogService = require('./services/blogService')\nimport {getAll, getToken, createBlog, loginService } from './services/blogService'\n\nconst App = () => {\n    const [blogs, setBlogs] = useState([])\n    const [errorMessage, setError] = useState(null)\n    const [addMessage, setAddMessage] = useState(null)\n    const [username, setUsername] = useState('')\n    const [password, setPassword] = useState('')\n    const [user, setUser] = useState(null)\n    const [blog, setBlog] = useState({\n        title: '', author: '', url: ''\n    })\n\n    useEffect(() => {\n        (async () => {\n            const blogsFetched = await getAll()\n            setBlogs(blogsFetched)\n        })()\n    }, [])\n\n\n    useEffect(() => {\n        const loggedUser = JSON.parse(window.localStorage.getItem(\"loggedBlogUser\"))\n        if(loggedUser) {\n            setUser(loggedUser)\n            getToken(loggedUser.token)\n        }\n    }, [])\n    \n    const handleLogin = async (e) => {\n        e.preventDefault()\n        try{\n            const userLogin = await loginService({\n                username, password\n            })\n            setUser(userLogin)\n            getToken(userLogin.token)\n            window.localStorage.setItem(\"loggedBlogUser\", JSON.stringify(userLogin))\n            setUsername('')\n            setPassword('')\n        }catch(e){\n            setError('Wrong credentials')\n            setUsername('')\n            setPassword('')\n            setTimeout(() => {\n                setError(null)\n            }, 2000)\n        }\n    }\n\n    const handlePost = async (e) => {\n        e.preventDefault()\n        try{\n            await createBlog(blog)\n            setAddMessage(`${blog.title} by ${blog.author} added`)\n            setBlog({title:'',author:'',url:''})\n            setTimeout(() => {\n                setAddMessage(null)\n            }, 2000)\n        }catch(e){\n            console.log('Error', e)\n        }\n        const blogsFetched = await getAll()\n        setBlogs(blogsFetched)\n    }\n\n    // Handle login functionality for login component\n    const handleUsername = (e) => {\n        setUsername(e.target.value)\n    }\n\n    const handlePassword = (e) => {\n        setPassword(e.target.value)\n    }\n\n    const handleLogout = () => {\n        window.localStorage.clear()\n        setUser(null)\n    }\n\n    // handle blog creation functionality for blog component\n    const handleBlogTitle = (e) => {\n        setBlog({...blog, title: e.target.value})\n    }\n    const handleBlogAuthor = (e) => {\n        setBlog({...blog, author: e.target.value})\n    }\n    const handleBlogUrl = (e) => {\n        setBlog({...blog, url: e.target.value})\n    }\n\n    if(user === null){\n        return (\n            <div>\n                <h3 style={{color: \"red\"}} >{errorMessage}</h3>\n                <LoginForm handleLogin={handleLogin} handlePassword={handlePassword}\n                    handleUsername={handleUsername} username={username} password={password} />\n            </div>\n        )\n    }\n\n    return (\n        <div>\n            <h3 style={{color:\"green\"}}>{addMessage}</h3>\n            <h1>blogs</h1>\n            <p><b>{user.name} logged in! <button onClick={handleLogout}>logout</button></b></p>\n            <BlogForm handlePost={handlePost} blog={blog} handleBlogTitle={handleBlogTitle}\n                handleBlogAuthor={handleBlogAuthor} handleBlogUrl={handleBlogUrl} />\n            {blogs.map(x => <Blogs key={x.id} blogs={x} />)}\n        </div>\n    )\n}\n\nexport default App\n","import ReactDOM from 'react-dom'\nimport App from './App'\n\nReactDOM.render(\n    <App />,\n    document.getElementById('root')\n)\n"],"sourceRoot":""}